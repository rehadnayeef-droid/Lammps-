#----------TENSILE TEST of  NiAl Functional graded materials in X direction[100]---------####

# ------------------------ INITIALIZATION ----------------------------
units 		metal
dimension	3
boundary	p   p	p
atom_style	atomic

# ----------------------- ATOM DEFINITION ----------------------------
read_data        alloy.lmp 

# ------------------------ FORCE FIELDS ------------------------------
pair_style   meam
pair_coeff	 * * library.meam Ni Ti Al NiAlTi.meam Ni Al

velocity       all      create 300 4928459 mom yes rot yes dist gaussian units box

# ------------------------- SETTINGS ---------------------------------
compute    1 all stress/atom NULL
compute    2 all reduce sum c_1[1] c_1[2] c_1[3]
compute csym all centro/atom bcc
compute peratom all pe/atom 
######################################

variable tmp equal "lx"
variable L0 equal ${tmp}
print "Initial Length, L0: ${L0}"

######################################
# DEFORMATION in X-direction

reset_timestep	0
timestep 0.001
fix     1  all nvt  temp  300 300 1 

#fix		1 all npt temp 300 300 1 y 0 0 1 z 0 0 1 drag 1 
variable        erate equal 1.0e-4
fix     2  all deform 1 x erate ${erate} units box remap x


# Output strain and stress info to file
# For units metal, pressure is in [bars] = 100 [kPa] = 1/10000 [GPa]
# p2, p3, p4 are in GPa
variable strain equal "(lx - v_L0)/v_L0"
variable p1 equal "v_strain"
variable p2 equal "-pxx/10000"
variable p3 equal "-pyy/10000"
variable p4 equal "-pzz/10000"
fix def1 all print 100 "${p1} ${p2} ${p3} ${p4}" file alloy.def1.txt screen no

# For atomic structure inspection
dump       1 all atom 1000 dump.final

# Use cfg for AtomEye
dump 		2 all cfg 500 dump.tensile_*.cfg mass type xs ys zs c_csym c_peratom fx fy fz
#dump_modify 2 element Hf Nb Ta Ti Zr

# Display thermo
thermo 	100
thermo_style	custom step v_strain temp v_p2 v_p3 v_p4 ke pe press

run	   200000

# SIMULATION DONE
print "All done"

